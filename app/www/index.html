<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <meta http-equiv="Content-Security-Policy" content="connect-src 'self' https://*.auth0.com http://*.couponbooked.com; default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com https://couponbooked.auth0.com; style-src 'self' 'unsafe-inline' https://cdn.auth0.com; media-src *; img-src *; font-src *;" />

    <!-- https://auth0.com/docs/quickstart/native/cordova/01-login;
        used this to change from single page web app to native -->                
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/nav.css" />
    <link rel="stylesheet" type="text/css" href="css/auth0-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/fontawesome.css" />
    <link rel="stylesheet" type="text/css" href="css/materialize.css" />
    <link rel="stylesheet" type="text/css" href="css/simpleNotification.css" />

    <!-- TODO: Implement https://pointdeveloper.com/add-app-icon-phonegap-build-apps/ in the future -->
    <title>Coupon Booked</title>
</head>

<body>
    <!-- HTML is my templating engine and CSS is my router -->
    <div class="app" id="app"></div>

    <template id="loading">
        <!-- NOTE: This is just here to be saved for other routes; not actually displayed -->
        <div id="nav">
            <div class="nav-container">
                <nav class="navbar navbar-expand-md navbar-light">
                    <div class="container">
                        <!-- TODO: Route clicks to home page -->
                        <div id="mobile">
                            <span class="menu-btn">
                                <img id="logo" src="images/logo.png">
                            </span>
                            <a id="brand" href="#">Coupon Booked</a>
                        </div>
        
                        <div class="collapse navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav">
                                <!-- Fullsize dropdown: show if authenticated -->
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle account" data-toggle="dropdown">
                                        <!-- Profile image should be set to the profile picture from the id token;
                                            src is the default image until the user's profile pic loads in -->
                                        <img alt="Profile picture" src="images/default.png" class="nav-user-profile profile-image" />
                                        <!-- TODO: Find a way to cache previous image -->
                                    </a>
                                </li>
                            </ul>
                        </div> <!-- navbar-collapse -->
                    </div> <!-- container -->
                </nav> <!-- navbar -->
            </div> <!-- nav-container -->
        
            <!-- https://www.labw3.com/2014/08/round-avatar-with-drop-down-profiles-menu-code.html -->
            <!-- TODO: Close on routing -->
            <div class="dropdown">
                <div class="submenu" style="display: none;">
                    <ul class="root">
                        <!-- NOTE: href required to have mouse change to clicker on hover -->
                        <li><a href="#" class="dashboard">Dashboard</a></li>
                        <li><a href="#" class="profile"><!--<span class="icon icon-profile"></span> -->Profile</a></li>
                        <li><a href="#" class="logout" id="sign-out"><!--<span class="icon icon-power"></span> -->Log out</a></li>
                    </ul>
                </div>
            </div> <!-- dropdown -->
        </div>

        <style> #nav { display: none; } </style>

        <!-- TODO: Eventually test this and experiment with removal / splashscreen animation replacement with Cordova plugin -->
        <div class="page">
            <div class="flex col abs-centered full-page">
                <div class="spinner spinner-lg is-auth0">
                    <div class="circle"></div>
                </div>
                <h3>Coupon Booked</h3>
            </div>
        </div>
    </template>

    <template id="login">
        <link rel="stylesheet" type="text/css" href="css/auth0.min.css" />
        <link rel="stylesheet" type="text/css" href="css/app.css" />
        <style> .page { position: absolute; } </style>

        <div class="page">
            <div class="flex col full-page">
                <div class="expand-to-fill flex abs-centered">
                    <div>
                        <h1>Coupon Booked</h1>
                        <h2>Getting Started</h2>
                        <p>Please click the button to log in or create an account. Signing in allows you to access the full feature set necessary to send gifts to your loved ones.</p>
                        <!-- IDEA: Privacy policy and the like in the pararaph like the example -->
                    </div>
                </div>
                <hr />
                <div class="flex hor-centered">
                    <button class="btn btn-success btn-login">
                        <span class="btn-icon icon-budicon-120"></span>
                        <span>Log In</span>
                    </button>
                </div>
            </div>
        </div>
    </template>

    <template id="home">
        <div class="page">
            <div id="main-content">
                <div id="content-home" class="page">
                    <section id="why">
                        <div id="title">
                            <h2>Why us?</h2>
                            <br />
                            <p>
                                Coupon Booked is an excellent choice for any occasion, whether
                                it be Mother's Day, Father's Day, a birthday, or an anniversary.
                                You should create a Book because it is a thoughtful way to show
                                someone how well you know them and how much you really care.
                            </p>
                        </div>
                    </section>
        
                    <section id="examples">
                        <h2>Examples</h2>
            
                        <div class="one four-300">
                            <!-- Placeholders until I can get legitimate content -->
                            <img src="images/300.png" />
                            <img src="images/300.png" />
                        </div>
                    </section>
        
                    <section id="createBook">
                        <h2>Create Your Own</h2>
                        <!-- TODO: Style this -->
                        <button>Start here!</button>
                    </section>
                </div>
            </div>

            <!-- IDEA: A footer would look real nice here; has good styling already -->
        </div>
    </template>

    <template id="create">
        <h2 style="margin-left: 15px; margin-top: 5px;">Who is it for?</h2>

        <div id="buttonContainer">
            <div id="row">
                <button>Father</button>
                <button>Mother</button>
            </div>
            <div id="row">
                <button>Brother</button>
                <button>Sister</button>
            </div>
            <div id="row">
                <button>Girlfriend</button>
                <button>Boyfriend</button>
            </div>
            <div id="row">
                <button>Friend</button>
                <button>Other</button>
            </div>
        </div>
    </template>

    <template id="manipulate">
        <div id="topbar">
            <img class="ionicon" id="backArrow" src="images/back.svg" />
            <a id="save">Save</a> <!-- IDEA: Save icon? -->
        </div>
        
        <div id="bookContent" class="col">
            <!-- Will create new coupon -->
            <button id="plus">+</button>
        </div>

        <div id="couponPreview" class="hide col">
            <h3 id="namePreview"></h3>
            <hr />
            <img id="imgPreview" src="images/gift.png" />
            <p id="descPreview"></p> <!-- TODO: Make this look better for short descriptions -->

            <!-- If iOS, icon is changed in Node -->
            <button id="edit"><img src="images/md-edit.svg" /></button>
        </div>

        <form id="couponForm" class="hide col">
            <!-- https://picnicss.com/documentation#dropimage -->
            <!-- https://stackoverflow.com/questions/4112575/client-checking-file-size-using-html5 -->
            <img id="couponImage" src="images/gift.png" />

            <!-- IDEA: Cycle through an array of these for examples; appropriate to template? 
                could be paired arrays to have description matched with name, or objects & pull fields -->
            <label for="name">Coupon Name</label>
            <input type="text" id="name" name="name" placeholder="Backrub">

            <label for="desc">Description</label>
            <input type="text" id="description" name="description" placeholder="A nice, long massage.">
            
            <!-- TODO: Implement immediate input checking that reminds you you can't go above 99 -->
            <label for="count">Count</label>
            <input type="number" id="count" name="count" min="1" max="99" placeholder="3">
        </form>
    </template>

    <template id="shareCode">
        <link rel="stylesheet" type="text/css" href="css/shareCode.css" />
        <div id="topbar">
            <!-- TODO: Finish styling -->
            <img class="ionicon" id="backArrow" src="images/back.svg" />
        </div>

        <h4 id="shareHeader">Your book is ready to be sent!</h4>
        <div id="shareCodeDiv">
            <div class="copytooltip">
                <span class="copytooltiptext" style="opacity: 0;">Copied to clipboard</span>
            </div>

            <p id="shareCodeText">88888888</p>
            <img id="copyButton" class="ionicon" src="images/copy.svg" />
            <!-- https://ionicons.com/ -->
        </div>

        <p id="shareCodeDescription">
            Send this code to whoever you want to receive your Coupon Book.
            They must create an account if they don't already have one to 
            redeem the code.
        </p>

        <!-- Handled in Node -->
        <iframe id="shareFrame" seamless></iframe>
    </template>

    <template id="dashboard">
        <!-- TODO: Add swipe support with animation -->
        <ul id="tabs-swipe-demo" class="tabs">
            <li class="tab"><a id="sentButton" href="#sent" class="active">Sent</a></li>
            <li class="tab"><a id="receivedButton" href="#received">Received</a></li>
        </ul>
        <div id="gestureZone">
            <div id="sent" class="col">
                <div id="noneSent" class="hidden">
                    <!-- Formatted like this in case I decide to add something else to message; if not, will switch to paragraph -->
                    You haven't sent any Books yet. <br />
                    <a id="start">Send one now!</a>
                </div>
            </div>
            <div id="received" class="col">
                <div id="noneReceived" class="hidden">
                    <!-- TODO: Work on the idea of requesting coupon books -->
                    You haven't received any Books yet. <br />
                    Want to <a id="request">request one</a>?
                </div>
            </div>
        </div>
    </template>

    <template id="profile">
        <link rel="stylesheet" type="text/css" href="css/app.css" />

        <div class="page">
            <h2>Profile</h2>
            <br />
            <img id="avatar" />
            <code class="profile-json code-picker">loading...</code>
            <br />
            <hr />
            <div class="flex hor-centered">
                <button class="btn btn-success btn-logout">
                    <span class="btn-icon icon-budicon-120"></span>
                    <span>Log Out</span>
                </button>
            </div>
        </div>
    </template>

    <script src="cordova.js"></script>
    <script src="./index.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/materialize.js"></script>
    <script src="js/simpleNotification.min.js"></script>
</body>

</html>